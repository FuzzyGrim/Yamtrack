{% extends "base.html" %}
{% load static %}
{% load unicorn %}

{% block title %}Details - Yamtrack{% endblock %}

{% block content %}
  <div id="details" class="content">
    <div class="header d-flex">
      <div class="image">
        {% if media.image != "none.svg" %}
          <img class="poster" src="{{media.image}}"/>
        {% else %}
          <img class="image-not-found" src="{% get_media_prefix %}/none.svg"/>
        {% endif %}
      </div>
      <div class="content flex-fill">
        <div class="title">{{media.title}}</div>

        <div class="start-date">
          <strong>Release date:</strong>
          {{media.start_date}}
        </div>

        <div class="status">
          <strong>Status:</strong> {{media.status}} 
        </div>

        <div class="overview">
          <strong>Overview:</strong>
          {{media.synopsis}}
        </div>

        {% if media.number_of_seasons %}
        <div class="num_seasons">
          <strong>Seasons:</strong> {{media.number_of_seasons}}
        </div>
        {% endif %}

        <div class="episodes">
          {% if media.num_episodes %} <strong>Episodes:</strong> {{media.num_episodes}}
          {% elif media.num_chapters %} <strong>Chapters:</strong> {{media.num_chapters}}
          {% endif %}
        </div>

        <div class="runtime">
          <strong>Runtime:</strong> {{media.runtime}}
        </div>

        <div class="genres">
          <strong>Genres:</strong>
          {% for genre in media.genres %}
              {{ genre.name }}{% if not forloop.last %},{% endif %}
          {% endfor %}
        </div>
      </div>
    </div>

    {% if media.seasons %}
      <div class="seasons-list-title"><strong>Seasons</strong></div>
      <div class="seasons-list-grid">
        {% for season in media.seasons %}
          <div class="season">
            <div class="season-image">
              {% if season.poster_path %}
                <img class="poster" src="https://image.tmdb.org/t/p/w500{{season.poster_path}}"/>
                {% else %}
                <img class="image-not-found" src="{% get_media_prefix %}/none.svg"/>
              {% endif %}
            </div>
            <div class="season-title">
              <strong>{{season.name}}</strong>
            </div>
          </div>
        {% endfor %}
      </div>
    {% endif %}

    

  </div>
{% endblock content%}

{% block extra_scripts %}
  <script src="{% static 'js/modal-load.js' %}"></script>
{% endblock extra_scripts %}