{% extends "base.html" %}
{% load static %}
{% load app_extras %}

{% block content %}
  <div id="details">
    <div class="header d-flex">
      <div class="image">
        {% if season.image != "none.svg" %}
          <img class="poster" src="{{season.image}}" alt="season.title" />
        {% else %}
          <img class="image-not-found" src="{% get_media_prefix %}{{season.image}}" alt="season.name"/>
        {% endif %}
      </div>
      <div class="content d-flex flex-column align-items-start">
        <div class="title w-100">{{media_title|capfirst}} - {{season.name}}</div>

        <div class="original-type">
          <strong>Type:</strong>
          Season
        </div>

        <div class="start-date">
          <strong>Release date:</strong>
          {{season.start_date}}
        </div>

        <div class="synopsis">
          <strong>Synopsis:</strong>
          {{season.synopsis}}
        </div>

        <div class="episodes-num">
            <strong>Total Episodes: {{ season.episodes|length }}</strong>
        </div>
        
        <div class="media-form">
          <button type="button" class="btn open-modal-button" data-bs-toggle="modal" data-bs-target="#modal-tv_{{media_id}}_{{season.season_number}}" 
          data-type="tv" data-id="{{media_id}}" data-season-number="{{season.season_number}}">
            <i class="bi bi-pencil-square"></i>
           </button>
          {% include "app/include/modal.html" with form_id="tv"|addstr:"_"|addstr:media_id|addstr:"_"|addstr:season.season_number title=media_title|capfirst media_id=media_id media_type="tv" season_number=season.season_number csrf_token=csrf_token only %}

        </div>
      </div>
    </div>

    <div class="episodes">
      <div class="d-flex justify-content-between align-items-center episode">
        <div class="p-2 episode-number"></div>
        <div class="p-2 episode-name"><strong>Name</strong></div>
        <div class="p-2 episode-date"><strong>Release Date</strong></div>
        <div class="p-2 watch-form"><strong>Status</strong></div>
      </div>
      {% for episode in season.episodes %}
        <div class="d-flex justify-content-between align-items-center episode">
          <div class="p-2 episode-number">{{episode.episode_number}}</div>
          <div class="p-2 episode-name">{{episode.name}}</div>
          <div class="p-2 episode-date">{{episode.air_date}}</div>
          <form class="p-2 watch-form">
            <button class="btn watch-btn"><i class="bi bi-eye-fill"></i></button>
          </form>
        </div>
      {% endfor %}
    </div>

  </div>
{% endblock content%}

{% block extra_scripts %}
  <script src="{% static 'js/modal-load.js' %}"></script>
{% endblock extra_scripts %}